##### 服务端代码热更新问题

还记得苹果阻止“热更新”吗？当时给很多开发者造成了一定的困扰，特别是游戏行业。其实，客户端、服务端都存在代码热更新的场景，这里重点了解下服务端代码热更新的问题。

服务端代码如果要支持热升级，需要解决的几个关键问题是：

- 保持连接（stop-gracefully） 不能断开old version与client建立的连接
- 无缝衔接（zero-downtime）要保证新的请求都能被new version的binary所处理，不能遗漏或拒绝
- 资源稳定（分布式资源锁）不能因为新旧版本的处理而导致资源不一致，资源抢占、竞争等问题

相关解决方案的参考文章：
- [热升级](https://wrfly.kfd.me/posts/热升级)
- [探讨服务端代码热更新](http://xiaorui.cc/2018/01/21/探讨tcp服务端代码热更新的问题上)
- [golang热更新在qq运动红包中的应用](http://km.oa.com/articles/show/351579)
