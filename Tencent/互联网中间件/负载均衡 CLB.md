# 概览

负载均衡（Cloud Load Balancer，CLB）提供安全快捷的流量分发服务，访问流量经由 CLB 可以自动分配到云中的多台云服务器上，扩展系统的服务能力并消除单点故障。负载均衡支持亿级连接和千万级并发，可轻松应对大流量访问，满足业务需求。 

- 高性能，CLB 单集群（非单个 CLB 实例）的最大并发连接数超过1.2 亿，可处理最大 40Gbps 的流量带宽，每秒处理600万包数据量，轻松应对日访问量超过千万的电商网站、社交平台和游戏业务等。
- 高可用，一组 CLB 集群由 4 台物理服务器组成，CLB 可用性高达 99.95%。在单台 CLB 实例可用的极端情况下，仍可支撑 3000 万以上的并发连接数，同时集群系统会及时剔除故障实例，筛选出健康实例，确保后端服务器业务正常运行。
- 弹性扩展，CLB 集群根据业务负载横向伸缩，弹性扩展应用系统对外的服务能力，同时借助弹性伸缩（Auto Scaling）的动态伸缩组自动创建和释放 CVM 实例，结合动态监控情况和秒级计费系统，您无需手工干预和预估资源，实现您的计算资源合理分配，防止资源浪费。
- 安全稳定，CLB 依靠**大禹分布式防御系统**能够防御绝大多数网络攻击（如 DDoS、CC、Web 入侵），针对流量攻击实现秒级清洗，极大避免 IP 被封、带宽被占满等情况发生。CLB **自带的 synproxy 防攻击机制**，避免了大禹系统生效之前后端 CVM 被攻击压垮，保护数据更安全稳定。
- 低成本，使用腾讯云 CLB，您无需再投入额外的负载均衡硬件，无需投入过多繁琐的运维工作，为您节省高达 99 %的硬件费用和人力支出。CLB 采用按量计费的计费模式，按实际使用量付费，您可以依据业务需求随时开通或销毁负载均衡实例。

# 产品详细信息

腾讯云 CLB 是一种对多台云服务器 CVM 进行流量分配的服务，它可以自动分配云中多个 CVM 实例间应用程序的访问流量，提升应用系统的访问流畅度和容错能力，从而满足用户访问应用系统的不同场景。

CLB 具备自助管理、自故障修复、防网络攻击等高级功能，适用于企业、社区、电子商务、游戏业务等领域，它提供了多个 CLB 实例，您可以按照自身需求选择购买不同的 CLB 实例配备到您的应用环境当中。购买 CLB 的费用包括实例租用费和后端服务器的带宽流量费，其中带宽流量费采用灵活的按量计费模式，按实际使用量付费。CLB 支持控制台、命令行、SDK 等多种管理工具来启动、监控或终止您的 CLB 实例。您可以随时开通或销毁 CLB 实例，为您的使用节省更多成本。

## 功能

腾讯云 CLB 提供多种强大功能，帮助您实现更高水平的应用程序负载均衡和容错能力。

### 多协议转发

负载均衡 CLB 支持四层协议请求（包括 TCP、UDP 协议）和七层协议请求（包括 HTTP、HTTPS 协议）；集中化的证书管理系统支持 HTTPS 协议，数据传输更快速、更安全可靠。

### 权重配置

权重配置可使后端 CVM 的请求处理更快速，后端服务器的权重默认为 10，可设置为 1-100 范围内的整数。流量经 CLB 后按权重比例，或经过访问来源 IP 地址的哈希、轮询结果分配到不同后端服务器上。更高配置（CPU、内存性能等）的服务器，可支持设置更大权重的比例，承担更多的请求。

### 基于内容路由

**应用型 CLB 七层协议提供基于内容的路由转发**（Content-based Routing），支持用户自定义域名/URL，**支持自定义转发规则和转发组内容**，用户可以将请求分发到不同转发规则下的后端云服务器。通过 CLB划分目标组实现业务分离，极大提升服务效率。

### 请求重定向

应用型 CLB 七层协议支持自定义重定向功能（Rewrite），该功能可解决两大难题：

- 强制 HTTPS： PC、手机浏览器等以 HTTP 请求访问 web 服务，经过 CLB 代理后，返回 HTTPS 响应到浏览器，强制以 HTTPS 访问网页。
- 自定义重定向：当出现 web 业务需要临时下线（如电商售罄、页面维护、更新升级时）会需要重定向能力。如果不做重定向，用户的收藏和搜索引擎数据库中的旧地址只能让访客得到一个“404”、“503”错误信息页面降低了用户体验度，导致额外流量损失。

### 多种调度算法

CLB 支持**加权轮询**、**IP Hash** 以及**加权最小连接数**这三种调度算法，并支持后端服务器权重设置，保证流量调度更均匀，提升 CLB 能力。在 HTTP 的七层协议中，还支持最小连接数的调度算法，可保证后端服务器在首次或再次加入时，该服务器的负载能够快速提升，降低其他后端服务器的负载压力。

### 会话保持

对于四层业务， CLB 提供简单会话保持功能（也称作基于源地址的会话保持、基于 IP 的会话保持功能），CLB 在作负载均衡时，以访问请求的源地址作为判断关联会话的依据，可将来自同一 IP （网段）地址的所有访问请求转发到同一台服务器上去。对于七层业务，CLB 提供 cookie 植入的会话保持方式，CLB 负责植入 cookie，后端服务器无需配置。

### 健康检查

CLB 会**定时检测后端云服务器是否正常运行**，您可自定义健康检查频率；当检测到云服务器异常时，CLB 会停止将流量分配到这些异常实例，同时筛选出健康实例，以此保证您的业务的连续性。

> 备注：
>
> 所谓的定时检查？一般都是通过心跳机制来完成的。心跳机制，也没有什么特殊的，就是请求方、被请求方之间通过专用接口检查状态而已。

### 跨可用区容灾

CLB 在同一个地域内采用多可用区部署，您可以在广州二区、三区部署两套高效能主备集群，当广州二区服务不可达时，流量可自动切换到广州三区，轻松应对机房级故障。结合 DNSpod 的 DNS 解析能力，还可支持全局负载均衡，实现跨地域容灾，[了解更多功能详情 >>](https://cloud.tencent.com/document/product/214/527)

# 实例类型

腾讯云提供不同的 CLB 实例类型来满足用户特定的使用场景，这些实例类型由不同的传输协议、功能、策略转发规则等组成。您可以根据不同的应用场景、不同的功能需求选择合适的负载均衡实例类型。

## 腾讯云 CLB 实例详情

腾讯云提供两种不同的负载均衡实例，分别是应用型负载均衡和传统型负载均衡。两种负载均衡实例均具有公网和内网属性。

### **应用型 CLB**

应用型 CLB适用于日访问量达千万、亿级别的web业务，满足复杂二级域名与业务模块间的路由分发需求。可基于 HTTP 请求内容（域名/URL路径等），提供高级路由均衡能力，支持 HTTPS、HTTP、TCP、UDP 等协议转发，公网支持重定向和跨地域绑定功能（内网不支持）。
功能

#### 基于内容路由

如果您的应用程序由不同的服务构成，则应用型 CLB 可以基于请求内容(域名、URL)将请求路由至某个特定服务。

#### 减少 DNS 轮询

通过自定义 URL 转发路径，可有效减少二级域名的数量，从而减少 DNS 轮询的次数，提生升网页访问的效率。

#### 更精准的健康检查

可判断二级域名/URL 的健康水平，更详尽的反馈业务的运行状况。

#### HTTP/2 支持

HTTP/2 使用单个多路复用连接，支持通过同一连接发送多个请求。它还可以压缩标头数据，并以二进制形式发送，且支持使用安全传输层协议（TLS）连接客户端。

### **传统型 CLB**

公网传统型 CLB 适用于日访问量百万以下，服务架构相对简单，业务模块较少，二级域名较少的 web 业务。它可以让您实现更高水平、更广泛的应用程序容错能力，支持 HTTPS、HTTP、TCP、UDP 等协议转发。

#### 私有协议均衡

传输层使用 TCP 监听可保证您应用层的私有协议，获得可靠的流量均衡。如游戏业务服务器请求分发时，使用 ip 会话保持功能，能保证用户掉线后自动重连。

#### 持续连接

满足应用层（Http/2、websocket）需长期运行 TCP 连接的需求，如借助 WebSocket，服务器可以与最终用户交换实时消息，且最终用户无需请求（或轮询）服务器提供更新。

# 定价

腾讯云 CLB 的定价费用包括实例租用费和后端服务器 CVM 的带宽流量费。带宽流量费采用后付费的按量计费模式，不需要提前支付费用，按实际使用量付费，适合业务需求量有瞬间大幅波动的场景（如电商大促销活动），当您在开通 CLB 实例时，会预先冻结该 CLB 一个小时的配置费用，并在每个整点（北京时间）进行一次结算。当用户停用负载均衡服务时，将按照退还时间进行小时扣费，不足一小时按照一小时进行扣费。

后端服务器 CVM 的带宽流量费依据您当前使用的云服务器 CVM 的计费模式，分为以下两种：

- 云服务器按带宽计费：带宽消耗使用的是云服务器已包含的公网带宽，不另外收取带宽费用；
- 云服务器按流量计费：用户使用公网负载均衡会产生出流量，需支付对应的流量费用，具体计费模式参见网络计费。